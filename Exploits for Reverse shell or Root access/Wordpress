Exploiting Wordpress and get Reverse Shell

2 ways to exploit Wordpress service (there are others...) and get a reverse shell.
	1. By uploading a fake plugin.
	2. By using the 404 template
	
	
	
-->		TEMPLATE 404



- Go to Apperance -> Editor -> Access the 404 template to edit it.

- The payload that we will use to start a reverse shell, we can find it in pentestmonkey to obtain it in our machine we can execute:

	URL: https://raw.githubusercontent.com/pentestmonkey/php-reverse-shell/master/php-reverse-shell.php

- We will edit the values $ip and $port of our payload, by our IP and the port that we want to use (in my case the port 443 (this way our connection would be a little masked as a connection belonging to the web server)).

- Now we will replace the content of the template 404 by the content of our payload, and we will save it.

- We will initiate a listener, as we expect a connection from our victim.

	> nc -lvp 443

- And simply visit a random page or even the page /wp-content/themes/twentyfifteen/404.php.

- As soon as we log in, we will have already obtained a shell revese to the user daemon.




--> 		UPLOADING A FAKE PLUGIN



- To do so, go to Plugins -> Add New -> Upload Plugin.

- We could use the payload mentioned in the previous section as is, but it will not comply with the format of a WordPress plugin... we will have to make our payload a valid plugin, to do this we will start by adding the following header to our payload:

-------
/*

Plugin Name:Â  Reverse Shell

Plugin URI: http://mrrobot.com

Description: Shell

Version: 1.0

Author: Shockz

Author URI: http://mrrobot.com

Text Domain: Shell

Domain Path: /languages

*/
--------

- Now we need to pack everything in a zip file.
	> sudo zip reverse.zip php-reverse-shell.php

- We will initiate a listener, as we expect a connection from our victim.
	> nc -lvp 443

- Finally we will upload our payload reverse.zip.

- But this is not enough, now we have to activate it, for this we go back to Plugins and click on "Activate".

- As soon as we activate it, we will have already obtained a shell revese to the user daemon.




